.\" This file or a portion of this file is licensed under the terms of
.\" the Globus Toolkit Public License, found in file GTPL, or at
.\" http://www.globus.org/toolkit/download/license.html. This notice must
.\" appear in redistributions of this file, with or without modification.
.\"
.\" Redistributions of this Software, with or without modification, must
.\" reproduce the GTPL in: (1) the Software, or (2) the Documentation or
.\" some other similar material which is provided with the Software (if
.\" any).
.\"
.\" Copyright 1999-2004 University of Chicago and The University of
.\" Southern California. All rights reserved.
.\"
.\"
.\" $Id$
.\"
.\" Authors: Jens-S. Vöckler, Yong Zhao
.\"
.\"
.TH deletevdc 1 "Mai, 3rd 2004"
.SH NAME
deletevdc \- remove definitions from the VDDB
.SH SYNOPSIS
.B deletevdc
[\-Dprop [..]] [\-d db-prefix] [\-t tr|dv] [-f] [\-n ns] [\-i id] [\-v version] [-c fn] [\-\-verbose]
.br
.B deletevdc
[\-Dprop [..]] \-V
.SH DESCRIPTION
The deletion command allows the user to remove unwanted definitions
from the virtual data database.
.B It is usually not recommended to remove definitions!
.PP
Please make sure that at least one of the arguments from the set
.BR \-t ,
.BR \-n ,
.BR \-i ,
and
.BR \-v
is specified. This is especially true, if the 
.BR \-f 
option is active. Unless you know exactly what you do. 
.SH ARGUMENTS
.TP
.B \-Dprop
The -D options allows an experienced user to override certain properties
which influence the program execution, among them the default location of
the user's properties file and the VDS home location. One may set several
CLI properties by giving this option multiple times.
.I The -D option(s) must be the first option on the command line. 
A CLI property take precedence over the properties file property 
of the same key.
.TP
.B \-c fn
.PD 0
.TP
.PD 1
.B \-\-capture fn
It is possible to remove definitions into a file. The file contents will
be in VDLx format. The file must be writable to the user. 
.IP
Default is not to capture the removed definitions.
.TP
.B \-d db-prefix
.PD 0
.TP
.PD 1
.B \-\-dbase db-prefix
The database prefix is currently unused.
.IP
Default is to use the VDC pointed to by the
.I vds.db.schema
property. If this property is unset, the 
.I SingleFileSchema
becomes the chosen schema, and the property
.I vds.db.schema.file.store
defaults to
.IR $VDS_HOME/var/vds.db ,
the eventual default database file.
.TP
.B \-t tr | dv
.PD 0
.TP
.PD 1
.B \-\-type tr | dv
You may limit your deletion to a subset of definitions, either to
just transformation, using argument
.IR tr ,
or to derivations, using argument
.IR dv .
The arguments are taken in a case-insensitive fashion.
.IP
Default is to apply any deletion to all matching definitions.
.TP
.B \-n namespace
.PD 0
.TP
.PD 1
.B \-\-namespace namespace
.PD 0
.TP
.PD 1
.B \-\-vdlns namespace
.PD 0
.TP
.PD 1
.B \-\-ns namespace

.TP
.B \-i name
.PD 0
.TP
.PD 1
.B \-\-vdlid name
.PD 0
.TP
.PD 1
.B \-\-id name
.PD 0
.TP
.PD 1
.B \-\-identifier name

.TP
.B \-v version
.PD 0
.TP
.PD 1
.B \-\-vdlvs version
.PD 0
.TP
.PD 1
.B \-\-vs version
specifies the search for a specific definition. You may specify any
combination of none, one, two or all three arguments, providing a 
namespace, name and version number respectively. Unspecified pieces
act as wild-card, matching any definition.
.IP
Behavior depends on the settings of the 
.B \-f 
option.
.TP
.B \-f
.PD 0
.TP
.PD 1
.B \-\-force
By default, only exact matches of the usual definition triple (quadruple,
if you count the type in) result in removals from the database. However,
if the 
.B force
option is active, the unspecified components are assumed to be wildcards.
This permits batched deletions. 
.IP
If
.B \-f 
is set, and you specify none of the options
.BR \-t , 
.BR \-n , 
.BR \-i ,
and
.B \-v 
all definitions match deletion, effectively wiping your database clear.
.TP
.B \-V
displays the version of the GriPhyN Virtual Data System you are using.
.TP
.B \-\-verbose
activates the verbose mode. This is equivalent to setting the property
.I vds.log.app
to 
.IR stdout .
More details about the program execution will become visible at the 
command-line.
.IP
Default is to be as silent as possible about the program execution. 
.SH "RETURN VALUE"
Regular and planned program terminations will result in an exit code of 0.
Abnormal termination will result in a non-zero exit code.
.SH FILES
.TP
.B $VDS_HOME/etc/vdl-1.23.xsd
is the suggested location of the latest XML schema to read the database.
.TP
.B $VDS_HOME/etc/properties
contains the system properties with all configurable options.
.TP
.B $HOME/.vdsrc
contains the user properties with all configurable options.
.TP
.B gvds.jar
contains all compiled Java bytecode to run the GriPhyN Virtual Data System.
.SH "ENVIRONMENT VARIABLES"
.TP
.B $VDS_HOME
is the suggested base directory of your the execution environment.
.TP
.B $JAVA_HOME
should be set and point to a valid location to start the intended Java
virtual machine as
.IR $JAVA_HOME/bin/java .
.TP
.B $CLASSPATH
should be set to contain all necessary files for the execution environment.
Please make sure that your 
.I CLASSPATH
includes the Xerces 2.6 classes.
.SH "SEE ALSO"
.BR insertvdc (1),
.BR updatevdc (1),
.BR searchvdc (1).
.SH EXAMPLE
.nf
\f(CB
$ deletevdc -t dv -n voeckler -i hello
$ echo $?
0

$ deletevdc -t tr -n tut -i echo --verbose
2005.08.16 13:13:46.389 CDT: [app] Searching the database
2005.08.16 13:13:47.108 CDT: [app] removed 1 definitions
$ echo $?
0
\fP
.fi
.SH RESTRICTIONS
Plenty. 
.SH AUTHORS
Jens-S. Vöckler <voeckler at cs dot uchicago dot edu>,
.\"Jens-S. V\*:ockler 
.br
Mike Wilde <wilde at mcs dot anl dot gov>,
.br
Yong Zhao <yongzh at cs dot uchicago dot edu>.
.PP
Chimera
.B http://www.griphyn.org/chimera/
.br
GriPhyN
.BR http://www.griphyn.org/
