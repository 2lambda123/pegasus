<!-- Creator     : groff version 1.18.1.4 -->
<!-- CreationDate: Tue Jan 13 14:56:47 2009 -->
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta name="Content-Style" content="text/css">
<title>kickstart</title>
</head>
<body>

<h1 align=center>kickstart</h1>
<a href="#NAME">NAME</a><br>
<a href="#SYNTAX">SYNTAX</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#ARGUMENTS">ARGUMENTS</a><br>
<a href="#RETURN VALUE">RETURN VALUE</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#SUBJOBS">SUBJOBS</a><br>
<a href="#VARIABLE REWRITING">VARIABLE REWRITING</a><br>
<a href="#FEEDBACK CHANNEL">FEEDBACK CHANNEL</a><br>
<a href="#EXAMPLE">EXAMPLE</a><br>
<a href="#OUTPUT FORMAT">OUTPUT FORMAT</a><br>
<a href="#RESTRICTIONS">RESTRICTIONS</a><br>
<a href="#FILES">FILES</a><br>
<a href="#ENVIRONMENT VARIABLES">ENVIRONMENT VARIABLES</a><br>
<a href="#AUTHORS">AUTHORS</a><br>

<hr>
<a name="NAME"></a>
<h2>NAME</h2>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="10%"></td>
<td width="89%">
<p>kickstart &minus; run an executable in a more universal
environment.</p>
</td>
</table>
<a name="SYNTAX"></a>
<h2>SYNTAX</h2>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="10%"></td>
<td width="89%">
<p><b>kickstart</b> [&minus;n tr] [&minus;N dv] [&minus;H]
[&minus;R site] [&minus;W | &minus;w wd] [&minus;L lbl
&minus;T iso]<br>
[&minus;s [l=]p | @fn] [&minus;S [l=]p | @fn] [&minus;i asi]
[&minus;o aso] [&minus;e ase] [-X]<br>
[&minus;l log] [&minus;B sz] (-I fn | app [appflags]
)<b><br>
kickstart</b> &minus;V</p>
</td>
</table>
<a name="DESCRIPTION"></a>
<h2>DESCRIPTION</h2>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="10%"></td>
<td width="89%">
<p>The <b>kickstart</b> executable is a light-weight program
which connects the <i>stdin</i>, <i>stdout</i> and
<i>stderr</i> filehandles for grid jobs on the remote
site.</p>
<!-- INDENTATION -->
<p>Sitting in between the remote scheduler and the
executable, it is possible for <b>kickstart</b> to gather
additional information about the executable run-time
behavior and resource usage, including the exit status of
jobs. This information is important for the VDS invocation
tracking as well as to Condor DAGMan&rsquo;s awareness of
Globus job failures.</p>
<!-- INDENTATION -->
<p><b>Kickstart</b> allows the optional execution of jobs
before and after the main application job that run in
chained execution with the main application job. See section
<b>SUBJOBS</b> for details about this feature.</p>
<!-- INDENTATION -->
<p>All jobs with relative path specifications to the
application are part of search relative to the current
working directory (yes, this is unsafe), and by prepending
each component from the <i>PATH</i> environment variable.
The first match is used. Jobs that use absolute pathnames,
starting in a slash, are exempt. Using an absolute path to
your executable is the safe and recommended option.</p>
<!-- INDENTATION -->
<p><b>Kickstart</b> rewrites the commandline of any job
(pre, post and main) with variable substitutions from Unix
environment variables. See section <b>VARIABLE REWRITING</b>
below for details on this feature.</p>
<!-- INDENTATION -->
<p><b>Kickstart</b> provides a temporary named pipe (fifo)
for applications that are gridstart aware. Any data an
application writes to the FIFO will be propagated back to
the submit host, thus enabling progress meters and other
application dependent monitoring. See section <b>FEEDBACK
CHANNEL</b> below for details on this feature.</p>
</td>
</table>
<a name="ARGUMENTS"></a>
<h2>ARGUMENTS</h2>
<!-- TABS -->
<table width="100%" border=0 rules="none" frame="void"
       cols="3" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="14%"></td>
<td width="7%">

<p><b>&minus;n tr</b></p>
</td>
<td width="77%">

<p>In order to associate the minimal performance
information of the job with the invocation records, the jobs
needs to carry which transformation in the VDC was
responsible for producing it. The format is the notion of
VDLt for fully-qualified definition names, like
namespace::name:version, with only the name portion being
mandatory.</p>
</td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="20%"></td>
<td width="79%">
<p>There is no default. If no value is given,
&quot;null&quot; will be reported.</p>
</td>
</table>
<!-- TABS -->
<table width="100%" border=0 rules="none" frame="void"
       cols="4" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="13%"></td>
<td width="7%">

<p><b>&minus;N dv</b></p>
</td>
<td width="1%"></td>
<td width="77%">

<p>In order to associate the VDC invocation record of the
job with the invocation records, the jobs needs to carry
which derivation in the VDC was responsible for producing
it. The format is the notion of VDLt for fully-qualified
definition names, like namespace::name:version, with only
the name portion being mandatory.</p>
</td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="20%"></td>
<td width="79%">
<p>There is no default. If no value is given,
&quot;null&quot; will be reported.</p>
</td>
</table>
<!-- TABS -->
<table width="100%" border=0 rules="none" frame="void"
       cols="4" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="13%"></td>
<td width="2%">

<p><b>&minus;H</b></p>
</td>
<td width="5%"></td>
<td width="77%">

<p>This option avoids kickstart writing the XML preamble
(entity), if you need to combine multiple kickstart records
into one document.</p>
</td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="20%"></td>
<td width="79%">
<p>Additionally, if specified, the environment and the
resource usage segments will not be written, assuming that a
in a concatinated record version, the initial run will have
captured those settings.</p>
</td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="10%"></td>
<td width="89%">
<p><b>&minus;R site</b></p></td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="21%"></td>
<td width="77%">
<p>In order to provide the greater picture, kickstart can
reflect the site handle (resource identifier) into its
output.</p>
</td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="20%"></td>
<td width="79%">
<p>There is no default. If no value is given, the attribute
will not be generated.</p>
</td>
</table>
<!-- TABS -->
<table width="100%" border=0 rules="none" frame="void"
       cols="4" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="8%">

<p><b>&minus;L lbl</b></p>
</td>
<td width="1%"></td>
<td width="77%">
</td>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="8%">

<p><b>&minus;T iso</b></p>
</td>
<td width="1%"></td>
<td width="77%">

<p>These optional arguments denote the workflow label (from
DAX) and the workflow&rsquo;s last modification time (from
DAX). The label <i>lbl</i> can be any sensible string of up
to 32 characters, but should use C identifier characters.
The timestamp <i>iso</i> must be an ISO 8601 compliant
time-stamp.</p>
</td>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="8%">

<p><b>&minus;S l=p</b></p>
</td>
<td width="1%"></td>
<td width="77%">

<p>If stat information on any file is required
<i>before</i> any jobs were started, logical to physical
file mappings to stat can be passed using the
<b>&minus;S</b> option. The LFN and PFN are concatenated by
an equals (=) sign. The LFN is optional: If no equals sign
is found, the argument is taken as sole PFN specification
without LFN.</p>
</td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="20%"></td>
<td width="79%">
<p>This option may be specified multiple times. To reduce
and overcome commandline length limits, if the argument is
prefixed with an at (@) sign, the argument is taken to be a
textual file of LFN to PFN mappings. The optionality
mentioned above applies. Each line inside the file argument
is the name of a file to stat. Comments (#) and empty lines
are permitted.</p>
<!-- INDENTATION -->
<p>Each PFN will incur a <i>statcall</i> record (element)
with attribute <i>id</i> set to value <i>initial</i>. The
optional <i>lfn</i> attribute is set to the LFN
stat&rsquo;ed. The filename is part of the <i>statinfo</i>
record inside.</p>
<!-- INDENTATION -->
<p>There is no default.</p>
</td>
</table>
<!-- TABS -->
<table width="100%" border=0 rules="none" frame="void"
       cols="4" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="13%"></td>
<td width="7%">

<p><b>&minus;s fn</b></p>
</td>
<td width="1%"></td>
<td width="77%">

<p>If stat information on any file is required <i>after</i>
all jobs have finished, logical to physical file mappings to
stat can be passed using the <b>&minus;s</b> option. The LFN
and PFN are concatenated by an equals (=) sign. The LFN is
optional: If no equals sign is found, the argument is taken
as sole PFN specification without LFN.</p>
</td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="20%"></td>
<td width="79%">
<p>This option may be specified multiple times. To reduce
and overcome commandline length limits, if the argument is
prefixed with an at (@) sign, the argument is taken to be a
textual file of LFN to PFN mappings. The optionality
mentioned above applies. Each line inside the file argument
is the name of a file to stat. Comments (#) and empty lines
are permitted.</p>
<!-- INDENTATION -->
<p>Each PFN will incur a <i>statcall</i> record (element)
with attribute <i>id</i> set to value <i>final</i>. The
optional <i>lfn</i> attribute is set to the LFN
stat&rsquo;ed. The filename is part of the <i>statinfo</i>
record inside.</p>
<!-- INDENTATION -->
<p>There is no default.</p>
</td>
</table>
<!-- TABS -->
<table width="100%" border=0 rules="none" frame="void"
       cols="4" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="8%">

<p><b>&minus;i asi</b></p>
</td>
<td width="1%"></td>
<td width="77%">

<p>This option allows <b>kickstart</b> to re-connect the
stdin of the application that it starts. Use a single hyphen
to share <i>stdin</i> with the one provided to
<b>kickstart</b>.</p>
</td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="20%"></td>
<td width="79%">
<p>The default is to connect <i>stdin</i> to
<i>/dev/null</i>.</p>
</td>
</table>
<!-- TABS -->
<table width="100%" border=0 rules="none" frame="void"
       cols="4" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="8%">

<p><b>&minus;o aso</b></p>
</td>
<td width="1%"></td>
<td width="77%">

<p>This option allows <b>kickstart</b> to re-connect the
<i>stdout</i> of the application that it starts. The mode is
used whenever an application produces meaningful results on
its <i>stdout</i> that need to be tracked by VDS. The real
<i>stdout</i> of Globus jobs is staged via GASS (GT2) or RFT
(GT4). The real <i>stdout</i> is used to propagate the
invocation record back to the submit site. Use the single
hyphen to share the application&rsquo;s <i>stdout</i> with
the one that is provided to <b>kickstart</b>. In that case,
the output from <b>kickstart</b> will interleave with
application output. For this reason, such a mode is not
recommended.</p>
</td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="20%"></td>
<td width="79%">
<p>In order to provide an uncaptured <i>stdout</i> as part
of the results, it is the default to connect the
<i>stdout</i> of the application to a temporary file. The
content of this temporary file will be transferred as
payload data in the <b>kickstart</b> results. The content
size is subject to payload limits, see the <b>&minus;B</b>
option. If the content grows large, only an initial portion
will become part of the payload. If the temporary file grows
too large, it may flood the worker node&rsquo;s temporary
space. The temporary file will be deleted after
<b>kickstart</b> finishes.</p>
<!-- INDENTATION -->
<p>If the filename is prefixed with an exclaimation point,
the file will be opened in append mode instead of overwrite
mode. Note that you may need to escape the exclaimation
point from the shell.</p>
<!-- INDENTATION -->
<p>The default is to connect <i>stdout</i> to a temporary
file.</p>
</td>
</table>
<!-- TABS -->
<table width="100%" border=0 rules="none" frame="void"
       cols="4" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="8%">

<p><b>&minus;e ase</b></p>
</td>
<td width="1%"></td>
<td width="77%">

<p>This option allows <b>kickstart</b> to re-connect the
<i>stderr</i> of the application that it starts. This option
is used whenever an application produces meaningful results
on <i>stderr</i> that needs tracking by VDS. The real
<i>stderr</i> of Globus jobs is staged via GASS (GT2) or RFT
(GT4). It is used to propagate abnormal behaviour from both,
<b>kickstart</b> and the application that it starts, though
its main use is to propagate application dependent data and
heartbeats. Use a single hyphen to share <i>stderr</i> with
the <i>stderr</i> that is provided to <b>kickstart</b>. This
is the backward compatible behavior.</p>
</td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="20%"></td>
<td width="79%">
<p>In order to provide an uncaptured <i>stderr</i> as part
of the results, by default the <i>stderr</i> of the
application will be connected to a temporary file. Its
content is transferred as payload data in the
<b>kickstart</b> results. If too large, only the an initial
portion will become part of the payload. If the temporary
file grows too large, it may flood the worker node&rsquo;s
temporary space. The temporary file will be deleted after
<b>kickstart</b> finishes.</p>
<!-- INDENTATION -->
<p>If the filename is prefixed with an exclaimation point,
the file will be opened in append mode instead of overwrite
mode. Note that you may need to escape the exclaimation
point from the shell.</p>
<!-- INDENTATION -->
<p>The default is to connect <i>stderr</i> to a temporary
file.</p>
</td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="10%"></td>
<td width="89%">
<p><b>&minus;l logfn</b></p></td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="21%"></td>
<td width="77%">
<p>allows to append the performance data to the specified
file. Thus, multiple XML documents may end up in the same
file, including their XML preamble. <i>stdout</i> is
normally used to stream back the results. Usually, this is a
GASS-staged stream. Use a single hyphen to generate the
output on the <i>stdout</i> that was provided to
<b>kickstart</b>, the default behavior.</p>
</td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="20%"></td>
<td width="79%">
<p>Default is to append the invocation record onto the
provided <i>stdout</i>.</p>
</td>
</table>
<!-- TABS -->
<table width="100%" border=0 rules="none" frame="void"
       cols="4" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="8%">

<p><b>&minus;w cwd</b></p>
</td>
<td width="1%"></td>
<td width="77%">

<p>permits the explicit setting of a new working directory
once kickstart is started. This is useful in a remote
scheduling environment, when the chosen working directory is
not visible on the job submitting host. If the directory
does not exist, <b>kickstart</b> will fail. This option is
mutually exclusive with the <i>&minus;W cwd</i> option.</p>
</td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="20%"></td>
<td width="79%">
<p>Default is to use the working directory that the
application was started in. This is usually set up by a
remote scheduling environment.</p>
</td>
</table>
<!-- TABS -->
<table width="100%" border=0 rules="none" frame="void"
       cols="3" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="13%"></td>
<td width="8%">

<p><b>&minus;W cwd</b></p>
</td>
<td width="77%">

<p>permits the explicit creation and setting of a new
working directory once kickstart is started. This is useful
in a remote scheduling environment, when the chosen working
directory is not visible on the job submitting host. If the
directory does not exist, <b>kickstart</b> will attempt to
create it, and then change into it. Both, creation and
directory change may still fail. This option is mutually
exclusive with the <i>&minus;w cwd</i> option.</p>
</td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="20%"></td>
<td width="79%">
<p>Default is to use the working directory that the
application was started in. This is usually set up by a
remote scheduling environment.</p>
</td>
</table>
<!-- TABS -->
<table width="100%" border=0 rules="none" frame="void"
       cols="4" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="2%">

<p><b>&minus;X</b></p>
</td>
<td width="7%"></td>
<td width="77%">

<p>make an application executable, no matter what. It is a
work-around code for a weakness of
<i>globus&minus;url&minus;copy</i> which does not copy the
permissions of the source to the destination. Thus, if an
executable is staged-in using GridFTP, it will have the
wrong permissions. Specifying the <i>&minus;X</i> flag will
attempt to change the mode to include the necessary x (and
r) bits to make the application executable.</p>
</td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="20%"></td>
<td width="79%">
<p>Default is not to change the mode of the application.
Note that this feature can be misused by hackers, as it is
attempted to call chmod on whatever path is specified.</p>
</td>
</table>
<!-- TABS -->
<table width="100%" border=0 rules="none" frame="void"
       cols="4" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">

<p><b>&minus;B sz</b></p>
</td>
<td width="2%"></td>
<td width="77%">

<p>varies the size of the debug output data section. If the
file descriptors <i>stdout</i> and <i>stderr</i> remain
untracked, <b>kickstart</b> tracks that output in temporary
files. The first few pages from this output is copied into a
data section in the output. In order to resize the length of
the output within reasonable boundaries, this option permits
a changes. Data beyond the size will not be copied, i.e. is
truncated.</p>
</td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="20%"></td>
<td width="79%">
<p>Warning: This is not a cheap way to obtain the stdio file
handle data. Please use tracked files for that. Due to
output buffer pre-allocation, using arbitrary large
arguments may result in failures of <b>kickstart</b> itself
to allocate the necessary memory.</p>
<!-- INDENTATION -->
<p>The default maximum size of the data section is 262144
byte.</p>
</td>
</table>
<!-- TABS -->
<table width="100%" border=0 rules="none" frame="void"
       cols="4" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="13%"></td>
<td width="7%">

<p><b>&minus;I fn</b></p>
</td>
<td width="1%"></td>
<td width="77%">

<p>In this mode, the application name and any arguments to
the application are specified inside of file <i>fn</i>. The
file contains one argument per line. Escapeing from Globus,
Condor and shell meta characters is not required. This mode
permits to use the maximum possible commandline length of
the underlying operationg system, e.g. 128k for Linux. Using
the <b>&minus;I</b> mode stops any further commandline
processing of <b>kickstart</b> command lines.</p>
</td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="20%"></td>
<td width="79%">
<p>Default is to use the <i>app flags</i> mode, where the
application is specified explicitely on the
command-line.</p>
</td>
</table>
<!-- TABS -->
<table width="100%" border=0 rules="none" frame="void"
       cols="4" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="13%"></td>
<td width="4%">

<p><b>app</b></p>
</td>
<td width="4%"></td>
<td width="77%">

<p>The path to the application has to be completely
specified. The application is a mandatory option.</p>
</td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="10%"></td>
<td width="89%">
<p><b>appflags</b></p></td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="21%"></td>
<td width="77%">
<p>Application may or may not have additional flags.</p>
</td>
</table>
<a name="RETURN VALUE"></a>
<h2>RETURN VALUE</h2>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="10%"></td>
<td width="89%">
<p><b>kickstart</b> will return the return value of the main
job. In addition, the error code 127 signals that the call
to exec failed, and 126 that reconnecting the stdio failed.
A job failing with the same exit codes is indistinguishable
from <b>kickstart</b> failures.</p>
</td>
</table>
<a name="SEE ALSO"></a>
<h2>SEE ALSO</h2>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="10%"></td>
<td width="89%">
<p><b>condor_submit_dag</b>(1), <b>condor_submit</b>(1),
<b>getrusage</b>(3c), <b>gencdag</b>(1).</p>
<!-- INDENTATION -->

<p><b>http://vds.isi.edu/doc/schemas/iv-1.10/iv-1.10.html</b>,<b><br>
http://vds.isi.edu/</b>link<b>Documentation.</b></p>
</td>
</table>
<a name="SUBJOBS"></a>
<h2>SUBJOBS</h2>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="10%"></td>
<td width="89%">
<p>Subjobs are a new feature and may have a few wrinkles
left.</p>
<!-- INDENTATION -->
<p>In order to allow specific setups and assertion checks
for compute nodes, <b>kickstart</b> allows the optional
execution of a <i>prejob</i>. This <i>prejob</i> is anything
that the remote compute node is capable of executing. For
modern Unix systems, this includes #! scripts interpreter
invocations, as long as the x bits on the executed file are
set. The main job is run if and only if the prejob returned
regularly with an exit code of zero.</p>
<!-- INDENTATION -->
<p>With similar restrictions, the optional execution of a
<i>postjob</i> is chained to the success of the main job.
The postjob will be run, if the main job terminated normally
with an exit code of zero.</p>
<!-- INDENTATION -->
<p>In addition, a user may specify a <i>setup</i> and a
<i>cleanup</i> job. The <i>setup</i> job sets up the remote
execution environment. The <i>cleanup</i> job may tear down
and clean-up after any job ran. Failure to run the setup job
has no impact on subsequent jobs. The cleanup is a job that
will even be attempted to run for all failed jobs. No job
information is passed. If you need to invoke multiple setup
or clean-up jobs, bundle them into a script, and invoke the
clean-up script. Failure of the clean-up job is not meant to
affect the progress of the remote workflow (DAGMan). This
may change in the future.</p>
<!-- INDENTATION -->
<p>The setup-, pre-, and post- and cleanup-job run on the
same compute node as the main job to execute. However, since
they run in separate processes as children of
<b>kickstart</b>, they are unable to influence each others
nor the main jobs environment settings.</p>
<!-- INDENTATION -->
<p>All jobs and their arguments are subject to variable
substitutions as explained in the next section.</p>
<!-- INDENTATION -->
<p>To specify the prejob, insert the the application
invocation and any optional commandline argument into the
environment variable <i>GRIDSTART_PREJOB</i>. If you are
invoking from a shell, you might want to use single quotes
to protect against the shell. If you are invoking from
Globus, you can append the RSL string feature. From Condor,
you can use Condor&rsquo;s notion of environment settings.
From VDS, use the <i>profile</i> command to set generic
scripts that will work on multiple sites, or the
transformation catalog to set environment variables in a
pool-specific fashion. Please remember that the execution of
the main job is chained to the success of the prejob.</p>
<!-- INDENTATION -->
<p>To set up the postjob, use the environment variable
<i>GRIDSTART_POSTJOB</i> to point to an application with
potential arguments to execute. The same restrictions as for
the prejob apply. Please note that the execution of the post
job is chained to the main job.</p>
<!-- INDENTATION -->
<p>To provide the independent setup job, use the environment
variable <i>GRIDSTART_SETUP</i>. The exit code of the setup
job has no influence on the remaining chain of jobs. To
provide an independent cleanup job, use the environment
variable <i>GRIDSTART_CLEANUP</i> to point to an application
with possible arguments to execute. The same restrictions as
for prejob and postjob apply. The cleanup is run regardless
of the exit status of any other jobs.</p>
</td>
</table>
<a name="VARIABLE REWRITING"></a>
<h2>VARIABLE REWRITING</h2>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="10%"></td>
<td width="89%">
<p>Variable substitution is a new feature and may have a few
wrinkles left.</p>
<!-- INDENTATION -->
<p>The variable substitution employs simple rules from the
Bourne shell syntax. Simple quoting rules for backslashed
characters, double quotes and single quotes are obeyed.
Thus, in order to pass a dollar sign to as argument to your
job, it must be escaped with a backslash from the variable
rewriting.</p>
<!-- INDENTATION -->
<p>For pre- and postjobs, double quotes allow the
preservation of whitespace and the insertion of special
characters like \a (alarm), \b (backspace), \n (newline), \r
(carriage return), \t (horizontal tab), and \v (vertical
tab). Octal modes are <i>not</i> allowed. Variables are
still substituted in double quotes. Single quotes inside
double quotes have no special meaning.</p>
<!-- INDENTATION -->
<p>Inside single quotes, no variables are expanded. The
backslash only escapes a single quote or backslash.</p>
<!-- INDENTATION -->
<p>Backticks are not supported.</p>
<!-- INDENTATION -->
<p>Variables are only substituted once. You cannot have
variables in variables. If you need this feature, please
request it.</p>
<!-- INDENTATION -->
<p>Outside quotes, arguments from the pre- and postjob are
split on linear whitespace. The backslash makes the next
character verbatim.</p>
<!-- INDENTATION -->
<p>Variables that are rewritten must start with a dollar
sign either outside quotes or inside double quotes. The
dollar may be followed by a valid identifier. A valid
identifier starts with a letter or the underscore. A valid
identifier may contain further letters, digits or
underscores. The identifier is case sensitive.</p>
<!-- INDENTATION -->
<p>The alternative use is to enclose the identifier inside
curly braces. In this case, almost any character is allowed
for the identifier, including whitespace. This is the
<i>only</i> curly brace expansion. No other Bourne magic
involving curly braces is supported.</p>
<!-- INDENTATION -->
<p>One of the advantages of variable substitution is, for
example, the ability to specify the application as
<i>$HOME/bin/app1</i> in the transformation catalog, and
thus to gridstart. As long as your home directory on any
compute node has a <i>bin</i> directory that contains the
application, the transformation catalog does not need to
care about the true location of the application path on each
pool. Even better, an administrator may decide to move your
home directory to a different place. As long as the compute
node is set up correctly, you don&rsquo;t have to adjust any
VDS data.</p>
<!-- INDENTATION -->
<p>Mind that variable substitution is an expert feature, as
some degree of tricky quoting is required to protect
substitutable variables and quotes from Globus, Condor and
VDS in that order. Note that Condor uses the dollar sign for
its own variables.</p>
<!-- INDENTATION -->
<p>The variable substitution assumptions for the main job
differ slightly from the prejob and postjob for technical
reasions. The pre- and postjob commandlines are passed as
one string. However, the main jobs commandline is already
split into pieces by the time it reaches <b>kickstart</b>.
Thus, any whitespace on the main job&rsquo;s commandline
must be preserved, and further argument splitting
avoided.</p>
<!-- INDENTATION -->
<p>It is highly recommended to experiment on the Unix
commandline with the <i>echo</i> and <i>env</i> applications
to obtain a feeling for the different quoting mechanisms
needed to achieve variable substitution.</p>
</td>
</table>
<a name="FEEDBACK CHANNEL"></a>
<h2>FEEDBACK CHANNEL</h2>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="10%"></td>
<td width="89%">
<p>A long-running application may consider to stream back
heart beats and other application-specific monitoring and
progress data. For this reason, <i>kickstart</i> provides a
feedback channel. At start-up, a transient named pipe, also
known as FIFO, is created. While waiting for started jobs to
finish, <i>kickstart</i> will attempt to read from the FIFO.
By default, any information read will be encapsulated in XML
tags, and written to <i>stderr .</i> Please note that in a
VDS, Globus, Condor-G environment, <i>stderr</i> will be
GASS streamed or staged to the submit host. At the submit
host, an application specific monitor may unpack the data
chunks and could for instance visually display them, or
aggregate them with other data. Please note that
<i>kickstart</i> only provides a feedback channel. The
content and interpretation is up to, and specific for the
application.</p>
<!-- INDENTATION -->
<p>In order to make an application gridstart aware, it needs
to be able to write to a FIFO. The filename can be picked up
from the environment variable <b>GRIDSTART_CHANNEL</b> which
is provided to all jobs. Please note that the application
must be prepared to handle the PIPE signal when writing to a
FIFO, and must be able to cope with failing write
operations.</p>
</td>
</table>
<a name="EXAMPLE"></a>
<h2>EXAMPLE</h2>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="10%"></td>
<td width="89%">
<p>You can run the <b>kickstart</b> executable locallly to
verify that it is functioning well. In the initial phase,
the format of the performance data may be slightly
adjusted.</p>
<!-- INDENTATION -->
<pre><b>$ env GRIDSTART_PREJOB=&rsquo;/bin/usleep 250000&rsquo; \
  GRIDSTART_POSTJOB=&rsquo;/bin/date -u&rsquo; \
  kickstart -l xx \$PEGASUS_HOME/bin/keg -T1 -o-
$ cat xx
&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;
  ...
  &lt;/statcall&gt;
&lt;/invocation&gt;
</b></pre>
<!-- INDENTATION -->
<p>Please take note a few things in the above example:</p>
<!-- INDENTATION -->
<p>The output from the postjob is appended to the output of
the main job on <i>stdout</i>. The output could potentially
be separated into different data sections through different
temporary files. If you truly need the separation, request
that feature.</p>
<!-- INDENTATION -->
<p>The log file is reported with a size of zero, because the
log file did indeed barely exist at the time the data
structure was (re-) initialized. With regular GASS output,
it will report the status of the socket file descriptor,
though.</p>
<!-- INDENTATION -->
<p>The file descriptors reported for the temporary files are
from the perspective of <b>kickstart</b>. Since the
temporary files have the close-on-exec flag set,
<b>kickstart</b>&rsquo;s filedescriptors are invisible to
the job processes. Still, the <i>stdio</i> of the job
processes are connected to the temporary files.</p>
<!-- INDENTATION -->
<p>Even this output already appears large. The output may
already be too large to guarantee that the append operation
on networked pipes (GASS, NFS) are atomically written.</p>
<!-- INDENTATION -->
<p>The current format of the performance data is as
follows:</p>
</td>
</table>
<a name="OUTPUT FORMAT"></a>
<h2>OUTPUT FORMAT</h2>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="10%"></td>
<td width="89%">
<p>Refer to
<b>http://www.griphyn.org/workspace/VDS/iv-1.4/iv-1.4.html</b>
for an up-to-date description of elements and their
attributes. Check with
<b>http://www.griphyn.org/workspace/VDS/</b> for IV schemas
with a higher version number.</p>
</td>
</table>
<a name="RESTRICTIONS"></a>
<h2>RESTRICTIONS</h2>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="10%"></td>
<td width="89%">
<p>There is no version for the Condor <i>standard</i>
universe. It is simply not possible within the constraints
of Condor.</p>
<!-- INDENTATION -->
<p>Due to its very nature, <b>kickstart</b> will also prove
difficult to port outside the Unix environment.</p>
<!-- INDENTATION -->
<p>Any of the pre-, main-, cleanup and postjob are unable to
influence one anothers visible environment.</p>
<!-- INDENTATION -->
<p>Do not use a VDL definition with just the name
<i>null</i> and no namespace or version.</p>
<!-- INDENTATION -->
<p>First Condor, and then Unix, place a limit on the length
of the commandline. The additional space required for the
gridstart invocation may silently overflow the maximum
space, and cause applications to fail. If you suspect to
work with many argument, try an argument-file based
approach.</p>
<!-- INDENTATION -->
<p>A job failing with exit code 126 or 127 is
indistinguishable from <b>kickstart</b> failing with the
same exit codes. Sometimes, careful examination of the
returned data can help.</p>
<!-- INDENTATION -->
<p>If the logfile is collected into a shared file, due to
the size of the data, simultaneous appends on a shared
filesystem from different machines may still mangle data.
Currently, file locking is not even attempted, although all
data is written atomically from the perspective of
<b>kickstart</b>.</p>
<!-- INDENTATION -->
<p>The upper limit of characters of commandline characters
is currently not checked by <b>kickstart</b>. Thus, some
variable substitutions could potentially result in a
commandline that is larger than permissable.</p>
<!-- INDENTATION -->
<p>If the output or error file is opened in append mode, but
the application decides to truncate its output file, as in
aboves example by opening <i>/dev/fd/1</i> inside
<i>keg</i>, the resulting file will still be truncated. This
is correct behavior, but sometimes not obvious.</p>
</td>
</table>
<a name="FILES"></a>
<h2>FILES</h2>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="10%"></td>
<td width="89%">
<p><b>$PEGASUS_HOME/etc/iv-1.6.xsd</b></p></td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="21%"></td>
<td width="77%">
<p>is the suggested location of the latest XML schema
describing the data on the submit host.</p>
</td>
</table>
<a name="ENVIRONMENT VARIABLES"></a>
<h2>ENVIRONMENT VARIABLES</h2>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="10%"></td>
<td width="89%">
<p><b>GRIDSTART_TMP</b></p></td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="21%"></td>
<td width="77%">
<p>is the hightest priority to look for a temporary
directory, if specified. This rather special variable was
introduced to overcome some peculiarities with the FNAL
cluster.</p>
</td>
</table>
<!-- TABS -->
<table width="100%" border=0 rules="none" frame="void"
       cols="3" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="10%">

<p><b>TMP</b></p>
</td>
<td width="77%">

<p>is the next hightest priority to look for a temporary
directory, if specified.</p>
</td>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="10%">

<p><b>TEMP</b></p>
</td>
<td width="77%">

<p>is the next priority for an environment variable
denoting a temporary files directory.</p>
</td>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="10%">

<p><b>TMPDIR</b></p>
</td>
<td width="77%">

<p>is next in the checklist. If none of these are found,
either the <i>stdio</i> definition <i>P_tmpdir</i> is taken,
or the fixed string <i>/tmp .</i></p>
</td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="10%"></td>
<td width="89%">
<p><b>GRIDSTART_SETUP</b></p></td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="21%"></td>
<td width="77%">
<p>contains a string that starts a job to be executed
unconditionally before any other jobs, see above for a
detailled description.</p>
</td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="10%"></td>
<td width="89%">
<p><b>GRIDSTART_PREJOB</b></p></td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="21%"></td>
<td width="77%">
<p>contains a string that starts a job to be executed before
the main job, see above for a detailled description.</p>
</td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="10%"></td>
<td width="89%">
<p><b>GRIDSTART_POSTJOB</b></p></td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="21%"></td>
<td width="77%">
<p>contains a string that starts a job to be executed
conditionally after the main job, see above for a detailled
description.</p>
</td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="10%"></td>
<td width="89%">
<p><b>GRIDSTART_CLEANUP</b></p></td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="21%"></td>
<td width="77%">
<p>contains a string that starts a job to be executed
unconditionally after any of the previous jobs, see above
for a detailled description.</p>
</td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="10%"></td>
<td width="89%">
<p><b>GRIDSTART_CHANNEL</b></p></td>
</table>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="21%"></td>
<td width="77%">
<p>is the name of a FIFO for an application-specific
feedback-channel, see above for a detailled description.</p>
</td>
</table>
<a name="AUTHORS"></a>
<h2>AUTHORS</h2>
<!-- INDENTATION -->
<table width="100%" border=0 rules="none" frame="void"
       cols="2" cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="10%"></td>
<td width="89%">
<p>Michael Milligan &lt;mbmillig@uchicago.edu&gt;,<br>
Jens-S. V&ouml;ckler &lt;voeckler@cs.uchicago.edu&gt;,<br>
Mike Wilde &lt;wilde@mcs.anl.gov&gt;,<br>
Yong Zhao &lt;yongzh@cs.uchicago.edu&gt;.</p>
<!-- INDENTATION -->
<p>Virtual Data System <b>http://vds.isi.edu/</b> and
<b>http://vds.uchicago.edu/</b><br>
GriPhyN <b>http://www.griphyn.org/</b></p>
</td>
</table>
<hr>
</body>
</html>
